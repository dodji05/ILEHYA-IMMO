{% extends 'FrontEnd/base.html.twig' %}
{% block style %}
    <link href="{{ asset('FrontEnd/house/css/jquery.steps.css') }}" rel="stylesheet">
    <link href="{{ asset('BackEnd/assets/plugins/autocomplete/css/autoComplete.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <style>
        .ui-autocomplete-loading {
            background: white url("images/ui-anim_basic_16x16.gif") right center no-repeat;
        }

        #autoComplete {
            height: 3rem;
            width: 370px;
            margin: 0;
            padding: 0 2rem 0 3.2rem;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            -webkit-box-sizing: border-box;
            font-size: 1rem;
            text-overflow: ellipsis;
            color: rgba(15, 63, 96, 0.3);
            outline: none;
            border-radius: 10rem;
            border: 0;
            border: 0.05rem solid rgba(121, 170, 48, 0.5);
            background-image: url(./images/search.svg);
            background-size: 1.4rem;
            background-position: left 1.05rem top 0.8rem;
            background-repeat: no-repeat;
            background-origin: border-box;
            background-color: #fff;
            transition: all 0.4s ease;
            -webkit-transition: all -webkit-transform 0.4s ease;
        }

        #autoComplete:hover {
            color: #0a0494;
            transition: all 0.3s ease;
            -webkit-transition: all -webkit-transform 0.3s ease;
        }

        #autoComplete:focus {
            color: #0a0494;
            border: 0.06rem solid rgba(121, 170, 48, 0.8);
        }

        #autoComplete_list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            padding: 0;
            margin-top: 0.5rem;
            border-radius: 0.6rem;
            background-color: #fff;
            box-shadow: 0 3px 6px rgba(149, 157, 165, 0.15);
            border: 1px solid rgba(33, 33, 33, 0.07);
            z-index: 1000;
            outline: none;
        }


        .title--1 {
            line-height: 1.2;
            margin-bottom: 2rem;
            font-size: 1.7rem;
        }

        .landing-wrapper {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            /*-webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;*/
            -webkit-box-orient: horizontal;
            -webkit-box-direction: reverse;
            -webkit-flex-direction: row-reverse;
            -ms-flex-direction: row-reverse;
            flex-direction: row-reverse;
        }

        .form-wrapper {
            max-width: 490px;
            padding-top: 3.125rem;
            padding-left: 0;
            padding-right: 3.125rem;
        }

        .title--2--dark {
            line-height: 1.8;
            font-size: 1.875rem;
            max-width: 600px;
            margin: auto;

        }

        @media only screen and (min-width: 62rem) {
            .item_titre {
                text-align: left;
            }
        }

        /*.item_titre {*/
        /*    text-align: center;*/
        /*}*/
        .title--3 {
            font-size: 1.3rem;
            /*font-family: 'Montserrat',sans-serif;*/
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        @media only screen and (min-width: 62rem) {
            .item_title_text {
                text-align: left;
            }
        }

        .item_title_text {
            text-align: center;
        }

        .container p {
            font-size: 18px;
            line-height: 1.6;
            text-align: justify;
        }

        @media only screen and (min-width: 62rem) {
            .item_icom {
                text-align: left;
            }
        }

        .item_icom {
            margin-top: 1.25rem;
            margin-bottom: 1.25rem;
            /*text-align: center;*/
        }

        .item_icom img {
            height: 4.5rem;
        }

        .input-radio-cards__card__label--error__icon, .input-radio-cards__card__label__icon {
            margin-top: auto;
        }

        .input-radio-cards__card__label--error__icon img, .input-radio-cards__card__label__icon img {
            width: 3.5rem;
            height: 3.5rem;
            margin-bottom: .5rem;
        }

        /*.item_text {*/
        /*    min-height: 6.25rem;*/
        /*    padding-left: .625rem;*/
        /*}*/
        /*@media only screen and (min-width: 62rem){*/
        /*    .item_text {*/
        /*        padding-left: 1.5rem;*/
        /*    }*/
        /*}*/
        /*@media only screen and (min-width: 62rem){*/

        /*    .item_titre {*/
        /*        text-align: left;*/
        /*    }*/
        /*}*/
        /*.item_titre {*/
        /*    text-align: center;*/
        /*    color: #1c3452;*/
        /*    font-family: Montserrat,sans-serif;*/
        /*    font-weight: 700;*/
        /*}*/


        #typeBiens {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
        }

        .form-check-input:not(:last-child) {
            /*margin-right: 1.25rem;*/
            margin-right: 0rem !important;
        }

        .form-check-input:first-child {
            margin-right: 0rem !important;
        }


        .form-check-input {
            width: 100%;
            height: 140px;
        }

        .form-check-input {
            display: none;
        }

        .form-check {
            width: 100%;
            height: 140px;
        }

        .form-check input:checked + .form-check-label {
            border-radius: 3px;
            -webkit-box-shadow: 0 0 14px 0 rgb(208 224 245 / 81%);
            box-shadow: 0 0 14px 0 rgb(208 224 245 / 81%);
            border: 1px solid #28476d;
        }

        .form-check-label {
            display: -webkit-box;
            display: -webkit-flex;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -webkit-flex-direction: column;
            -ms-flex-direction: column;
            flex-direction: column;
            -webkit-box-align: center;
            -webkit-align-items: center;
            -ms-flex-align: center;
            align-items: center;
            height: 100%;
            border-radius: 3px;
            border: 1px solid #c4d3e4;
            color: #1c3452;
            padding-bottom: 1.25rem;


        }

        /*.form-check-label, .form-check-label--error {*/
        /*    display: -webkit-box;*/
        /*    display: -webkit-flex;*/
        /*    display: -ms-flexbox;*/
        /*    display: flex;*/
        /*    -webkit-box-orient: vertical;*/
        /*    -webkit-box-direction: normal;*/
        /*    -webkit-flex-direction: column;*/
        /*    -ms-flex-direction: column;*/
        /*    flex-direction: column;*/
        /*    -webkit-box-align: center;*/
        /*    -webkit-align-items: center;*/
        /*    -ms-flex-align: center;*/
        /*    align-items: center;*/
        /*    height: 100%;*/
        /*    border-radius: 3px;*/
        /*    border: 1px solid #c4d3e4;*/
        /*    color: #1c3452;*/
        /*    padding-bottom: 1.25rem;*/
        /*}*/
        @media (max-width: 767px) {
            .landing-wrapper{
                display: -webkit-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -webkit-align-items: center;
    -ms-flex-align: center;
    align-items: center;
    /* -webkit-box-orient: horizontal; */
    -webkit-box-direction: reverse;
    -webkit-flex-direction: row;
    -ms-flex-direction: row;
    flex-direction: row;
            }
            #autoComplete{
                width:auto
            }
            .title--2--dark {
    font-size: 16px;
}
.title--1 {
   
    font-size: 1.4rem;
}
.img-hero{
    display: none
}
.justeprix {
    margin:35px
}
.item_icom{
    text-align: center;
}
h2 .textitle--3 {
    text-align:center;
    font-size: 1.3rem
}
.title--2--dark {
    font-size: 16px;
}

        }
    </style>
    {# <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.0/nouislider.min.css" integrity="sha512-6JqGSqQ++AEggYltdgSse8pKG90U/5U0bbkZoa94uSDG/BhI5YpYcy2LyWPWjXu40lUVEgEKHZ/2hCrwQvbODw==" crossorigin="anonymous" /> #}
{% endblock %}
 {% block navbar %}
     {% include 'FrontEnd/partials/_navbar_fixed_top.html.twig' %}

 {% endblock %}
{% block content %}
    <section>
    <div class="container-fluid" style="padding-left: 1.25rem !important;">
        <div class="row">
            <div class="col-md-6 landing-wrapper">
                <div class="form-wrapper">
                    <p class="title--1">Estimez votre bien maintenant... et contactez un agent ensuite...</p>
                    {{ form_start(form) }}
                    <div class="col-sm-12">
                        <div class="form-group row">
                            <h6 style="font-size:16px"> Quartier ou village</h6>
                            <div class="autoComplete_wrapper">

                            </div>
                            <div class="ui-widget">

                                <input id="autoComplete">
                            </div>


                            {# <div class="col-sm-3"> #}
                            {# {{ form_label(form.adresse, null, {'label_attr':{'class':'col-sm-12'}}) }} #}
                            {# {{ form_widget (form.arrondissement) }} #}
                            {# </div> #}
                        </div>
                    </div>
                    <br>


                    <div class="col-sm-12">
                        {# {{ form_label(form.typeBiens, null, {'label_attr':{'class':'col-sm-12'}}) }} #}
                        {# <label for="{{ form.typeBiens.vars.id }}" #}
                        {# class="{{ form.typeBiens.vars.required ? 'required' }}"> #}
                        {# <div data-v-ad130114="" class="input-radio-cards__card__label__icon"> #}
                        {# <img data-v-ad130114="" src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/apartment.svg?1615977342366" alt="icon"></div> #}
                        {# {{ form.typeBiens.vars.label }} #}
                        {# </label> #}
                        {# <label class="form-check-label required" for="typeBiens_1">Parcelle vides</label> #}
                        {# {{ form_ (form.typeBiens) }}

                        essai

                            {% form_theme form _self %}

 
 
 
   {% block choice_widget_expanded %}
      <div {{ block('widget_container_attributes') }}>
         {% for child in form.status %}
            {{ form_widget(child, { 'attr': {'class': 'mdl-radio__button', 'name': 'options'}}) }}
            {{ form_label(child) }}
         {% endfor %}
      </div>
   {% endblock %}
                        #}

                        {# <div class="form-check"> #}
                        {# <input type="radio" id="typeBiens_0" name="{{ form.typeBiens.vars.label }}" required="required" data-color="Red" class="form-check-input" value="maison"> #}
                        {# <label class="form-check-label required" for="{{ form.typeBiens.vars.label }}">Maison</label> #}
                        {# </div> #}
                        <h6 style="font-size: 16px"> Type de bien </h6>

                        {% form_theme form _self %}

                        {% block choice_widget_expanded -%}
                            <div id="typeBiens">
                                {% for child in form.typeBiens %}
                                    {{ form_widget(child) }}
                                    {% block checkbox_radio_label -%}
                                        {%- if widget is defined -%}
                                            {% set is_parent_custom = parent_label_class is defined and ('checkbox-custom' in parent_label_class or 'radio-custom' in parent_label_class or 'switch-custom' in parent_label_class) %}
                                            {% set is_custom = label_attr.class is defined and ('checkbox-custom' in label_attr.class or 'radio-custom' in label_attr.class or 'switch-custom' in label_attr.class) %}
                                            {{ widget|raw }}
                                            <label class="form-check-label input-radio-cards__card__label required"
                                                   for="{{ id }}">
                                                <div class="input-radio-cards__card__label__icon">
                                                    {% if id =="typeBiens_1" %}
                                                        <img src="https://d1e9888xfd1rj0.cloudfront.net/1634032936/icons/apartment.svg?1634032938526"
                                                             alt="icon">
                                                    {% endif %}
                                                    {% if id =="typeBiens_0" %}
                                                        <img src="https://d1e9888xfd1rj0.cloudfront.net/1634032936/icons/house.svg?1634032938526"
                                                             alt="icon">
                                                    {% endif %}
                                                </div>
                                                <div class="input-radio-cards__card__label__text"><span
                                                            data-v-ad130114="">{{ label }}</span></div>

                                            </label>
                                        {% endif %}
                                    {% endblock %}

                                {% endfor %}
                            </div>
                        {% endblock %}

                        {# {{ form_widget (form.typeBiens) }} #}
                    </div>
                    <div class="pull-left ml-15 mt-10" style="
                     margin: 30px;
                    padding-top: 1.5rem;
                    padding-bottom: 1.4rem;
                    ">
                        <button class="btn btn-success btn-cicle"
                                type="submit">{{ button_label|default('Commencer l\'estimation') }}</button>
                    </div>
                    {{ form_end(form) }}
                </div>
            </div>
            <div class="col-md-6">
                <div class="img-hero">
                    <img src="{{ asset('images/app/estimation-biens-ilehya.jpg') }}" class="img-fluid"/>
                </div>

            </div>
        </div>

    </div>
    </section>
    <section class="justeprix">
        <div class="container">
            <div class="row">
                <p>
                    L’estimation d’un bien immobilier est une étape cruciale dans la vente d’un bien. Le vendeur n’a pas
                    intérêt à trop le surévaluer ou à le sous-estimer. Pour fixer le <strong> « juste prix »</strong>,
                    il est nécessaire
                    d'évaluer un certain nombre de points de façon objective.
                </p>
                <p>
                    D’un côté, l’acheteur a envie de réaliser « une bonne affaire ». De l’autre, le propriétaire
                    souhaite
                    vendre au <strong> « meilleur prix » </strong>. <br> Mais qu’est-ce qu’un bon prix ?

                </p>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="item_icom">
                        <img src="{{ asset('images/app/icons/vendeur-icon.png') }}" alt="">
                    </div>
                    <div class="item_titre">
                        <h2 class="title--3">
                            <span class="item_title_number"></span>
                            <span class="item_title_text"> Pour le vendeur</span>
                        </h2>
                    </div>
                    <div class="item_text">
                        <p>Il se situe bien souvent au-dessus du prix du marché. Le propriétaire, qui
                            a une relation affective à son logement, a tendance à perdre en objectivité. Il est d’autant
                            plus partial qu’il souhaite généralement réaliser une plus-value même si c’est théoriquement
                            impossible.
                        </p>
                    </div>

                </div>
                <div class="col-md-6">
                    <div class="item_icom">
                        <img src="{{ asset('images/app/icons/acheteur-icon.png') }}" alt="">
                    </div>
                    <div class="item_titre">
                        <h2 class="title--3">
                            <span class="item_title_number"></span>
                            <span class="item_title_text"> Pour l’acheteur</span>
                        </h2>
                    </div>
                    <div class="item_text">
                        <p>Le « meilleur prix » sera, à l’inverse, en-dessous des tarifs du marché. De ce
                            fait, un acheteur aura tendance à scruter les moindres défauts du bien pour mieux négocier
                            le prix d’achat.</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <p>
                    Entre les deux estimations,
                    <strong>il y a le « juste prix ». Celui qui permet de vendre un logement dans les délais moyens sans
                        qu’on ne brade le bien.</strong>
                </p>
            </div>

        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center" style="margin: 30px;">
                    <h1 class="title title--2--dark">
                        Obtenez un prix indicatif pour votre bien avec notre outil gratuit d'estimation en ligne !
                    </h1>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12 text-center">
                    <div class="item_icom">
                        <img src="{{ asset('images/app/icons/estimation-icon.jpg') }}" alt="">
                    </div>
                    <div class="item_titre">
                        <h2 class="title--3">
                            <span class="item_title_number"></span>
                            <span class="item_title_text"> Vous souhaitez connaître la valeur de votre bien : parcelle, maison, immeuble de
                    tous genres ? </span>
                        </h2>

                    </div>
                    <div class="item_text">
                        <p>
                            Notre outil en ligne gratuit vous fournit un prix indicatif pour votre bien. Vous pouvez,
                            par
                            ailleurs, faire affiner cette estimation par notre d’expertise immobilière.
                            <br> Évitez de faire trainer votre bien sur le marché à cause d’un prix au-dessus de celui
                            du
                            marché de la même manière, ne vendez pas votre bien à un prix trop bas en utilisant dès à
                            présent notre outil gratuit d’estimation en ligne !

                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}
{% block javascripts %}
    {# <script src="https://code.jquery.com/jquery-1.12.4.js"></script> #}
    {# <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script> #}
          {# <script type="text/javascript" src="{{ asset('FrontEnd/house/js/jquery-ui.js') }}"></script> #}
    <script type="text/javascript" src="{{ asset('FrontEnd/house/js/jquery-1.12.4.js') }}"></script>
    <script type="text/javascript" src="{{ asset('FrontEnd/house/js/jquery.steps.js') }}"></script>
    <script type="text/javascript" src="{{ asset('FrontEnd/house/js/jquery-ui.js') }}"></script>

  
    <script type="text/javascript" src="{{ asset('BackEnd/assets/plugins/autocomplete/js/autoComplete.js') }}"></script>

    <script>


        class LinkedSelect {

            /**
             * @param {HTMLSelectElement} $select
             */
            constructor($select) {
                this.$select = $select
                this.$target = document.querySelector(this.$select.dataset.target)
                this.$placeholder = this.$target.firstElementChild
                //  this.onChange = debounce(this.onChange.bind(this), 500)
                this.onChange = this.onChange.bind(this)
                this.$loader = null
                this.cache = {}
                this.$select.addEventListener('change', this.onChange)

            }

            /**
             * Se déclenche au changement de valeur d'un select
             * @param {Event} e
             */
            onChange(e) {
                if (e.target.value === '0') {

                    return
                }

                this.loadOptions(e.target.value, (options) => {
                    this.$target.innerHTML = options
                    this.$target.insertBefore(this.$placeholder, this.$target.firstChild)
                    this.$target.selectedIndex = 0
                    this.$target.style.display = null

                })
            }

            /**
             * Charge les options à partir du serveur (ou du cache)
             * @param {string} id
             * @param callback
             */
            loadOptions(id, callback) {
                if (this.cache[id]) {
                    callback(this.cache[id])
                    return
                }
                this.showLoader()
                let request = new XMLHttpRequest()
                request.open('GET', this.$select.dataset.source.replace('id', id), true)
                request.onload = () => {
                    if (request.status >= 200 && request.status < 400) {
                        let data = JSON.parse(request.responseText)
                        let options = data.reduce(function (acc, option) {
                            return acc + '<option value="' + option.value + '">' + option.label + '</option>'
                        }, '')
                        this.cache[id] = options
                        this.hideLoader()
                        callback(options)
                    } else {
                        alert('Impossible de charger la liste')
                    }
                }
                request.onerror = function () {
                    alert('Impossible de charger la liste')
                }
                request.send()
            }

            showLoader() {
                this.$loader = document.createTextNode('Chargement...')
                this.$target.parentNode.appendChild(this.$loader)
            }

            hideLoader() {
                if (this.$loader !== null) {
                    this.$loader.parentNode.removeChild(this.$loader)
                    this.$loader = null
                }
            }

        }


        let $selects = document.querySelectorAll('.linked-select')
        $selects.forEach(function ($select) {
            new LinkedSelect($select)
        })
    </script>


    <script>
        $(function () {
            document
                .querySelector("#autoComplete")
                .setAttribute("placeholder", "Selectionnez le quartier ou le village");

            $("#autoComplete").autocomplete({
                source: function (request, response) {
                    $.ajax({
                        url: "/ajax/rechercher/quartier",
                        dataType: "json",
                        data: {
                            term: request.term
                        },
                        success: function (data) {
                            response(data);
                        }
                    });
                },
                minLength: 2,
                select: function (event, ui) {
                    $("#autoComplete").val(ui.item.value);
                    $("#quartier").val(ui.item.id);
                    $("#project-description").html(ui.item.desc);
                    $("#project-icon").attr("src", "images/" + ui.item.icon);

                    return false;
                }
            })
                .autocomplete("instance")._renderItem = function (ul, item) {
                return $("<li>")
                    .append("<div>" + item.value + "<br>" + item.id + "</div>")
                    .appendTo(ul);
            };
        });
    </script>
{% endblock %}