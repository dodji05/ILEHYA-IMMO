{% extends 'FrontEnd/base.html.twig' %}
{% block style %}
    <link href="{{ asset('FrontEnd/house/css/steps.css') }}" rel="stylesheet">
{% endblock %}
{# {% block navbar %}
    {% include 'FrontEnd/partials/_navbar_fixed_top.html.twig' %}

{% endblock %} #}
{% block content %}
    <!-- CONTAINER -->
    <div class="container-fluid d-flex align-items-center min-vh-100" style="margin-top: 150px;">
        <div class="row g-0 justify-content-center">
            <!-- TITLE -->


            <div class="col-lg-4 flex mx-0 px-0 justify-content-center text-center align-items-center">
{#                <img src="{{ asset('images/app/ilehya-logo.png') }}" class="covid-image max-h-70px" alt="" />#}
                {# <img class="covid-image" src="./img/covid-check.png"> #}

                <h2 class="titlestep">Vous souhaitez connaître la valeur estimative de votre maison ou villa ? </h2>
                <br>
                <h3 class="titlestep">Remplissez le formulaire ci-contre</h3> <br>

            </div>
            <!-- FORMS -->
            <div class="col-lg-8 mx-0 px-0">
                <div class="progress">
                    <div aria-valuemax="100" aria-valuemin="0" aria-valuenow="50"
                         class="progress-bar progress-bar-striped progress-bar-animated bg-danger" role="progressbar"
                         style="width: 0%"></div>
                </div>
                <div id="qbox-container">
                    {{ form_start(form, {'attr':{'id' :'form-wrapper','name':'form-wrapper','class':'needs-validation'}}) }}
{#                    <form class="needs-validation" id="form-wrapper" method="post" name="form-wrapper" novalidate="">#}
                        <div id="steps-container">
                            <div class="step">
                                <h4>Quels sont les espaces disponibles</h4>

                                <section class="estimation-form">
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/surface.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label">
                                            <label>
                                                Superficie habitable de la maison
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon">
                                            <div class="ranger-input">
                                                <div class="input-range-with-value__slider">
                                                    <div class="input--range">
                                                        <input type="range" min="0" max="15000" id="sur"
                                                               class="surfacehabitable">
                                                    </div>
                                                </div>
                                                <div class="input-range-with-value__input">
                                                    <div class="input-group input-group--append">
                                                        {{ form_widget (form.esp_surface_habitable) }}
                                                        <div class="input-group__append">
                                                            <abbr class="input-group__abbr">m²</abbr>
                                                        </div>
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                    </div>


                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/surface.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Nombre de chambres
                                            </label>
                                        </div>
                                        <div class=" estimation-row__input estimation-row__input--medium">

                                            <div class="input-group input-group--stepper">
                                                <button type="button" class="input-group--stepper__button input-group--stepper__button--prepend">
                                                    -
                                                </button>
                                                {{ form_widget (form.esp_nombre_chambre, {'attr':{'class':'input-group__main input-group--stepper__main input-group__main--prepend input-group__main--append input--text'}}) }}
                                                <button type="button" class="input-group--stepper__button input-group--stepper__button--append">
                                                    +
                                                </button>
                                            </div>

                                        </div>
                                        <div class="estimation-row__icon"><img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/bedrooms.svg?1615977342366" alt="icon" class="illustration-icon"></div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/surface.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Nombre de salles de bains ?
                                            </label>
                                        </div>
                                        <div class=" estimation-row__input estimation-row__input--medium">

                                            <div class="input-group input-group--stepper">
                                                <button type="button" class="input-group--stepper__button input-group--stepper__button--prepend">
                                                    -
                                                </button>
                                                {{ form_widget (form.esp_nombre_bains, {'attr':{'class':'input-group__main input-group--stepper__main input-group__main--prepend input-group__main--append input--text'}}) }}
                                                <button type="button" class="input-group--stepper__button input-group--stepper__button--append">
                                                    +
                                                </button>
                                            </div>

                                        </div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Y a-t-il un jardin ?
                                            </label>
                                        </div>
                                        <div class="custom-control custom-switch">
                                            <div class="custom-control custom-switch">
                                                {{ form_widget (form.esp_jardin, {'label_attr':{'class':'input--switch__input'}} ) }}

{#                                                <label for="checkbox_classified_property_outdoor_garden_exists"#}
{#                                                       class="component-input-switch input--switch ">#}
{#                                                    #}{#                                                            {{ form_widget (form.esp_jardin, {'label_attr':{'class':'input--switch__input'}} ) }}#}
{#                                                    <input type="checkbox" id="checkbox_classified_property_outdoor_garden_exists" name="classified_property_outdoor_garden_exists" class="input--switch__input">#}
{#                                                    <span class="input--switch__label"></span>#}
{#                                                </label>#}
                                            </div>

                                        </div>
                                </section>
                            </div>
                            <div class="step">
                                <h4>Quelles sont les caractéristiques de la maison ?</h4>
                                <section>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/surface.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Année de construction?
                                            </label>
                                        </div>
                                        <div class=" estimation-row__input estimation-row__input--medium">

                                            <div class="input-group input-group--stepper">

                                                {{ form_widget (form.caract_annee_construction, {'attr':{'class':'input-group__main input-group--stepper__main input-group__main--prepend input-group__main--append input--text'}}) }}
                                            </div>

                                        </div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Nombre de facades?
                                            </label>
                                        </div>
                                        <div class=" estimation-row__input estimation-row__input--medium">

                                            <div class="input-group input-group--stepper">
                                                <button class="input-group--stepper__button input-group--stepper__button--prepend">
                                                    -
                                                </button>
                                                {{ form_widget (form.caract_nombres_facades, {'attr':{'class':'input-group__main input-group--stepper__main input-group__main--prepend input-group__main--append input--text'}}) }}
                                                <button class="input-group--stepper__button input-group--stepper__button--append">
                                                    +
                                                </button>
                                            </div>

                                        </div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Aménagements
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon estimation-row__input--font-body">
                                            <div class="input--checkbox">
                                                {{ form_widget (form.caract_amenagements , {'attr':{'class':'input--checkbox__input'}}) }}
                                                {{ form_label(form.caract_amenagements, null, {'label_attr':{'class':'input--checkbox__label'}}) }}
                                            </div>
                                        </div>
                                        {#                                                {{ form_label(form.caract_amenagements, null, {'label_attr':{'class':'input--checkbox__label'}}) }}#}

                                    </div>

                                </section>
                            </div>
                            <div class="step">
                                <h4> Autre Caraterisique du bien </h4>
                                <section>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/property-view.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Dans quel état est actuellement le bâtiment ?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon">
                                            {{ form_widget(form.caract_etat) }}

                                        </div>
                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/property-view.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366" alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                De quelle vue bénéficie le bien ?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon">
                                            {{ form_widget (form.caract_vue) }}
                                        </div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/property-view.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366" alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Quel est le standing du bien ?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon">
                                            {{ form_widget (form.caract_standing) }}
                                        </div>

                                    </div>
                                </section>
                            </div>

                            <div class="step">
                                <h4> Allez, plus que quelques questions …</h4>
                                <section>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                La maison est-elle située au bord de la voie ou du goudron?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon estimation-row__input--font-body">
                                            <div class="input--checkbox">
                                                {{ form_widget (form.situation , {'attr':{'class':'input--checkbox__input'}}) }}

                                            </div>
                                        </div>

                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label label--medium">
                                            <label>
                                                Quels autres éléments influencent le prix ?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon estimation-row__input--font-body">
                                            <div class="input--checkbox">
                                                {{ form_widget (form.pls_influence_prix , {'attr':{'class':'input--checkbox__input'}}) }}

                                            </div>
                                        </div>

                                    </div>
                                </section>
                            </div>
                            <div class="step">
                                <h4>À propos de vous...</h4>
                                <section>
                                    <div class="estimation-row">
                                        <div class="estimation-row__icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/property-view.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                            <img src="https://d1e9888xfd1rj0.cloudfront.net/1615977340/icons/terrace.svg?1615977342366"
                                                 alt="icon" class="illustration-icon">
                                        </div>
                                        <div class="estimation-row__label">
                                            <label>
                                                Êtes-vous propriétaire du bien ?
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--full-icon">
                                            {{ form_widget (form.proprietaire) }}
                                        </div>


                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__label  estimation-row__label--space">
                                            <label>
                                                Indiquez votre adresse e-mail
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--large">
                                            {{ form_widget (form.mail, {'attr':{'class':'input--text input-text'}}) }}
                                        </div>
                                        {#                                                {{ form_label(form.mail, null, {'label_attr':{'class':'estimation-row__label'}}) }}#}
                                        {#                                                {{ form_widget (form.mail) }}#}
                                    </div>
                                    <div class="estimation-row">
                                        <div class="estimation-row__label  estimation-row__label--space">
                                            <label>
                                                Indiquez votre munéro de téléphone
                                            </label>
                                        </div>
                                        <div class="estimation-row__input estimation-row__input--large">
                                            {{ form_widget (form.telephone, {'attr':{'class':'input--text input-text'}}) }}
                                        </div>

                                    </div>
                                </section>
                            </div>

                            <div id="success">
                                <div class="mt-5">
                                    <h4>Success! We'll get back to you ASAP!</h4>
                                    <p>Meanwhile, clean your hands often, use soap and water, or an alcohol-based hand rub, maintain a safe distance from anyone who is coughing or sneezing and always wear a mask when physical distancing is not possible.</p>
                                    <a class="back-link" href="">Go back from the beginning ➜</a>
                                </div>
                            </div>
                        </div>
                        <div id="q-box__buttons">
                            <button id="prev-btn" type="button">Précedent</button>
                            <button id="next-btn" type="button">Suivant</button>
                            <button id="submit-btn" type="submit">Terminer</button>
                        </div>
                    </form>
                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="{{ asset('FrontEnd/house/js/steps.js') }}"></script>
    <script type="text/javascript" src="{{ asset('FrontEnd/house/vendor/nouislider/js/nouislider.js') }}"></script>

    <script>
        const slider = document.getElementById('price-slider')
        const sliders = document.getElementById('sur')
        sliders.addEventListener('change', updateValue);
        const surface = document.getElementById('estimation_maison_esp_surface_habitable')
        surface.value = sliders.value
        sliders.oninput = function () {
            sliders.value = this.value

        }

        function updateValue(e) {
            surface.value = this.value
        }

        if (slider) {
            const min = 200//document.getElementById('min')
            const max = 10000//document.getElementById('max')
            const surface = document.getElementById('estimation_maison_esp_surface_habitable')
            const minValue = Math.floor(parseInt(slider.dataset.min, 10) / 10) * 10
            const maxValue = Math.ceil(parseInt(slider.dataset.max, 10) / 10) * 10
            const range = noUiSlider.create(slider, {
                start: [min || minValue, max || maxValue],
                connect: true,
                step: 10,
                range: {
                    'min': minValue,
                    'max': maxValue
                }
            })
            range.on('slide', function (values, handle) {
                if (handle === 0) {
                    surface.value = Math.round(values[0])
                }
                // if (handle === 1) {
                //     max  = Math.round(values[1])
                // }
            })
            range.on('end', function (values, handle) {
                if (handle === 0) {
                    surface.dispatchEvent(new Event('change'))
                }
                // else {
                //     max.dispatchEvent(new Event('change'))
                // }
            })
        }

    </script>
{% endblock %}